{% extends 'base.html' %}
{% block title %}Cryptography{% endblock %}
{% load static %}
{% block content %}

    <h1 style="margin-top: 65px;">Cryptography Beginner Maze <hr> <br> Level 2: <span>The Missing Treasure Map</span></h1>
    <p>The infamous treasure hunter, Captain Riddle, has left a cryptic message for his successor. It is said that whoever deciphers it will find a map to a hidden treasure. The message has been encrypted using the Caesar Cipher, and the shift value is hidden in a puzzle.
        <br>
        Do you have what it takes to crack the code and claim the treasure?
        </p>
    
    <h3>Introduction:</h3>
    <p>Captain Riddle loved puzzles, and he left a clue to the decryption key hidden in this riddle::</p> <br>
    <table>
        <tr>
            <td><strong>| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The number of legs on three cats, divided by the sides of a square, multiplied by the fingers on one hand.</strong></td>
        </tr>

    </table>
    <br>
    <p>Once you figure out the key, your task is to decrypt the encrypted message and reveal the treasure map's location.</p>

    <h3>Cipher:</h3>
    <p><strong>Encryption Method:</strong> Ceasar Cipher</p>

    <h3>Encrypted Message:</h3>
    <p><strong>Message (Hex):</strong>LTARDBT ID IWT RPKT DC HTPHWDGT</p>

    <h3>Objective:</h3>
    <p>1. Solve the riddle to discover the decryption key (shift value). <br>
       2. Learn how the Caesar Cipher works and write a Python script to decrypt the message. <br>
       3. Decode the message to find the location of the treasure.</p>

    <h3>Prerequisites:</h3>
    <ul>
        <li>Basic knowledge of Python programming</li>
        <li>Understanding of ciphers and basic cryptographic techniques</li>
    </ul>

    <h3>Task: Your Answer</h3>
    <form id="task1Form">
      <label for="task1Answer">Write the <span>decrypted message</span> that was encrypted using the Ceasar cipher?</label>
      <input type="text" id="task1Answer" name="task1Answer">
      <button type="button" onclick="submitTask1()">Submit</button>
      <span id="task1Result"></span>
    </form>
    <br>
    <br>
    <form id="task2Form">
        <label for="task2Answer">What is the <span>key</span> that Captain Riddle used to encrypt his message?</label>
        <input type="text" id="task2Answer" name="task2Answer">
        <button type="button" onclick="submitTask2()">Submit</button>
        <span id="task2Result"></span>
      </form>
<br>
      <div id="mazeCompletion">
        <h3>Level UP!</h3>
        <button style="width: fit-content;"><a href="/levelList2">View Other Levels</a></button>
    </div>
    {%endblock%}

    {% block script %}
        function submitTask1() {
            var answer = document.getElementById('task1Answer').value;
            if (answer.toLowerCase() === 'welcome to the cave on seashore') {
                document.getElementById('task1Result').textContent = 'Solved';
        updateScore(true); 
                document.getElementById('task1Result').dataset.solved = 'true';
            } else {
                document.getElementById('task1Result').textContent = 'Try again';
        updateScore(false); 
                document.getElementById('task1Result').dataset.solved = 'false';
            }
            checkMazeCompletion();
        }
    
        function submitTask2() {
            var answer = document.getElementById('task2Answer').value;
            if (answer.toLowerCase() === '15') {
                document.getElementById('task2Result').textContent = 'Solved';
        updateScore(true); 
                document.getElementById('task2Result').dataset.solved = 'true';
            } else {
                document.getElementById('task2Result').textContent = 'Try again';
        updateScore(false); 
                document.getElementById('task2Result').dataset.solved = 'false';
            }
            checkMazeCompletion();
        }
    
        function checkMazeCompletion() {
            var task1Solved = document.getElementById('task1Result').dataset.solved === 'true';
            var task2Solved = document.getElementById('task2Result').dataset.solved === 'true';
    
            if (task1Solved && task2Solved) {
                document.getElementById('mazeCompletion').style.display = 'block';
            }
        }

    {% endblock %}
